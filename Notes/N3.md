# Page-Object Model
* **What Problem Does It Solve?**
    - Raw UI tests mix selectors, actions and assertions in one long script. 
    - When the UI changes(class renamed, element moved) many tests might break. 
    - POM(page object model) movel all UI-specific details into dedicated page files, so the all locators are handled on these page files. 

## Key Building Blocks
* **Page class / module**
    - Constructor stores the Playwright `page` object and defines locators. 
    - Methods wrap common actions `goto()`, `login()`, `searchUser()`. 
    - Optional helpers assert state: `ensureLoaded()`, `expectSomething..()`. 
* **Test spec**
    - Imports the page class via fixture. 
    - Calls high-level methods. 
    - Reads like a business scenario. 
* **Locator**
    - A playwright handle for an element. 
    - Lives inside the page class, not in the test. 

# Advanced Report Settings
- Reports show **what ran**, **what failed**, and **why**, without re-running the 
tests. 
- Managers/Product Owners/Team get a high level pass/fail view, engineers(testers)
can deep dive via screenshot, video and analyze the results/fails. 

## First Report
1. Edit `playwright.config.js`.
2. Add **HTML** reporter. 
    * Under the **defineCofnig()** add:
    ```js
    reporter:[
        ['html', {open: 'on-failure'}] // opens automaticaly if the test fails. 
    ]
    ```
## Improve Reporting
Edit the `use` block in the `playwright.config.js`. 
```js
use:{
    trace: 'on-first-retry', // .zip file you can open in trace viewer
    screenshot: 'only-on-failure', // PNG on failure
    video: 'retain-on-failure', // MP4 file on failure. 
}
```
## Add Title/Branding to the Our Report
```js
reporter:[
        ['html', {
            open: 'on-failure',
            title: 'Orange HRM Test Report'
        }] // opens automaticaly if the test fails. 
    ]
```

## Include JSON Reports
```js
reporter:[
        ['html', {
            open: 'on-failure',
            title: 'Orange HRM Test Report'
        }], // opens automaticaly if the test fails. 
        ['json', {outputFIle:'outputPath'}]
    ]
```
- Why: Parse results, we could post on Slack,Teams(Communication Apps for teams.) etc. 

# Allure Report
- Allure is on open source dahsboard turns raw test results intor a rich web app:
trends, pie charts, timeline view, attachmats, history of flaky tests. 

- Why choose it over a Playwright's built-in HTML
    * Multi run history(HTML reporter shows only last run)
    * Executive widgets(pass % by tag, flaky chart, duration trend.)
    * Plug in ecosystem(Jira/Slack links, export to PDF)
    * Same UI for many runners(JUnit, TestNG, Cypress,Playwright - one report accross all teams.)
    * Playwright HTML is still great for quick local debugging however Allure shines
    when you need historical dashboards or to share results with non-engineers. 

## Guide to Allure Report
1. **Install Once**
```bash
npm -i -D allure-playwright
```
2. Wire the Reporter in `playwright.config.js`
Under the **defineCofnig()** add:
```js
reporter:[
    ['allure-playwright',
    {outputFolder: 'resultLocation',
     detail: true, // capture step details
     suiteTitle: false // keep Playwright's describe blocks.   
    }
    ]
]
```
Whatever is in the use block **allure** report picks then automatically. 

3. Run Tests and Generate the Allure web app
```bash
npx playwright test
npx allure generate allure-results --clean -o allure-report
npx allure open allure-report
```
The last command launches a local server and opens the report.